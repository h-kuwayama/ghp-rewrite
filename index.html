<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Github Pages Rewrite</title>
<meta charset="utf-8">
<meta name="description" content="Github Pages で Apache（.htaccess）の mod_rewrite と同等の機能を実装し、パーマリンク（整形された動的URL）での遷移を実現する。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Github Pages Rewrite</h1>
  <h2>Top</h2>
  <nav>
    <ul>
      <li><a href="/redirect_test">TOP</li>
  		<li><a href="/redirect_test/about">About</a></li>
  		<li><a href="/redirect_test/contact">Contact</a></li>
  	</ul>
  </nav>
  <ol>
    <li>TOP<li>
  </ol>
	<p>Github Pages でパーマリンク（整形された動的URL）を有効にします。404ページと historyAPI を利用して、Apache（.htaccess）の mod_rewrite や nginx の rewrite などと同等の動きを実現します。</p>
  <h3>仕組み</h3>
  <ul class="howto">
    <li>パーマリンクによる無効なURLを一旦 404.html で受ける（Github Pages のデフォルトの仕様）。</li>
    <li>404.html に仕込んだ javascript で、クエリストリング付きの有効なURLに変換して目的のページにリダイレクト。</li>
    <li>リダイレクトされた目的のページで historyAPI の replaceState を使って、URLを最初にリクエストされたパーマリンクに変換</li>
  </ul>
  <h3>エントリー</h3>
  <p>パーマリンクによる遷移</p>
	<ul>
		<li><a href="/redirect_test/post/hellow-world">Hello, World!</a></li>
		<li><a href="/redirect_test/post/you-can-rewrite">You can rewrite!</a></li>
		<li><a href="/redirect_test/post/23">23</a></li>
	</ul>
</body>
</html>
